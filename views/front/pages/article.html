<!-- Article -->
<div class="pmp-page-content-box" data-ng-controller="articleController">
  <article class="pmp-article">
    <h3 class="pmp-box-type pmp-box-type-news" data-ng-show="'news' == globals.article.type">
      News
    </h3>
    <h3 class="pmp-box-type pmp-box-type-personal" data-ng-show="'life' == globals.article.type">
      Personal
    </h3>
    <h3 class="pmp-box-type pmp-box-type-project" data-ng-show="'project' == globals.article.type">
      Project
    </h3>
    <h3 class="pmp-box-type pmp-box-type-tutorial" data-ng-show="'tutorial' == globals.article.type">
      Tutorial
    </h3>
    <h3 class="pmp-box-type pmp-box-type-flash" data-ng-show="'flash' == globals.article.type">
      Flash
    </h3>

    <hr class="pmp-break" />

    <div class="pmp-article-content">
      <header>
        <h1 class="pmp-article-title">
          <span data-ng-bind-html="globals.article.title | trust">
          </span>

          <div class="pmp-article-date">
            <span data-ng-bind="globals.article.created | date: 'yyyy-MM-dd'"></span>
          </div>
        </h1>

        <hr class="pmp-break" />

        <div class="pmp-article-tags">
          <div class="pmp-article-tag-icon">
            <span class="icon icon-tags"></span>
          </div>

          <div class="pmp-article-tag-list">
            <a class="pmp-article-tag" data-ng-repeat="tag in globals.article.tags" href="/search?search={{tag}}" data-ng-bind="tag"></a>
          </div>
        </div>
      </header>

      <hr class="pmp-break" />

      <div data-ng-show="true == globals.isPreview">
        <h3 class="pmp-box-type pmp-box-type-inverse" data-ng-show="'news' == globals.article.type">
          <center>Preview</center>
        </h3>
        <hr class="pmp-break" />
      </div>

      <main class="pmp-article-text pmp-md-generated"
           data-ng-bind-html="globals.article.text | trust"
           data-compile="globals.article.text">
      </main>
    </div>
  </article>
</div>
<!-- !Article -->

<!-- See also -->
<div class="pmp-page-content-box" id="seeAlso"
     data-ng-hide="0 == globals.relatedArticles.length">
  <div class="pmp-see-also">
    <h3 class="pmp-box-type">
      Continue reading
    </h3>

    <div class="pmp-related-article-list">
      <div class="grid-2">
        <div class="cell-1 cell-mobile-2"
             data-ng-repeat="relatedArticle in globals.relatedArticles">
          <a class="pmp-box-type pmp-box-type-news"
             href="/article/{{relatedArticle.technicalName}}"
             data-ng-show="'news' == relatedArticle.type">
            News:
            <span class="pmp-article-title"
                  data-ng-bind-html="relatedArticle.title | trust"></span>
          </a>

          <a class="pmp-box-type pmp-box-type-personal"
             href="/article/{{relatedArticle.technicalName}}"
             data-ng-show="'life' == relatedArticle.type">
            Personal:
            <span class="pmp-article-title"
                  data-ng-bind-html="relatedArticle.title | trust"></span>
          </a>

          <a class="pmp-box-type pmp-box-type-project"
             href="/article/{{relatedArticle.technicalName}}"
             data-ng-show="'project' == relatedArticle.type">
            Project:
            <span class="pmp-article-title"
                  data-ng-bind-html="relatedArticle.title | trust"></span>
          </a>

          <a class="pmp-box-type pmp-box-type-tutorial"
             href="/article/{{relatedArticle.technicalName}}"
             data-ng-show="'tutorial' == relatedArticle.type">
            Tutorial:
            <span class="pmp-article-title"
                  data-ng-bind-html="relatedArticle.title | trust"></span>
          </a>

          <a class="pmp-box-type pmp-box-type-flash"
             href="/article/{{relatedArticle.technicalName}}"
             data-ng-show="'flash' == relatedArticle.type">
            Flash:
            <span class="pmp-article-title"
                  data-ng-bind-html="relatedArticle.title | trust"></span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- !See also -->

<!-- Comment -->
<div class="pmp-page-content-box" id="comments" data-ng-controller="articleCommentsController" data-ng-hide="true == globals.deactivateComments">
  <h3 class="pmp-box-type">
    Comments
  </h3>

  <hr class="pmp-break">

  <div class="pmp-comments">
    <div class="pmp-comment clearfix" data-ng-repeat="comment in globals.commentList">
      <div class="pmp-comment-author" data-ng-class="{'pmp-comment-author-user': undefined != comment.user}">
        <span data-ng-hide="undefined != comment.user" data-ng-bind="comment.author"></span>
        <span data-ng-show="undefined != comment.user">
          <span data-ng-show="comment.user.username == comment.author">{{comment.user.username}}</span>
          <span data-ng-hide="comment.user.username == comment.author">{{comment.user.username}} as {{comment.author}}</span>
        </span>
      </div>
      <div class="pmp-comment-date">
        <span class="pmp-comment-date-date" data-ng-bind="comment.created | date: 'yyyy-MM-dd'"></span>,
        <b><span class="pmp-comment-date-date" data-ng-bind="comment.created | date: 'hh:mm'"></span></b>
      </div>

      <div class="pmp-comment-text"
           data-ng-bind="comment.text"
           data-ng-hide="'hidden' == comment.status">
      </div>
      <div class="pmp-comment-text pmp-comment-hidden"
           data-ng-show="'hidden' == comment.status">
        Comment hidden (probably because it was spam or obvious trolling). Don't do that.
      </div>
    </div>

    <!-- Add comment -->
    <div class="pmp-add-comment" data-ng-hide="true == newCommentPosted">
      <input class="control" type="text" name="author"
             data-ng-model="newComment.author"
             data-ng-init="newComment.author = globals.user.username || newComment.author || ''"
             data-ng-class="{'has-data': 0 != newComment.author.length}"
             maxlength="32"
             placeholder="Name..." />

      <textarea class="control" type="text" name="text"
                data-ng-model="newComment.text"
                data-ng-init="newComment.text = newComment.text || ''"
                data-ng-class="{'has-data': 0 != newComment.text.length}"
                data-resizable rows="3"
                maxlength="4096"
                placeholder="Comment..."></textarea>

      <div class="pmp-add-comment-button">
        <button class="button button-labeled button-success" type="button" data-ng-click="postComment()">
          <div class="button-label"><span class="icon icon-checkmark"></span></div>
          Submit
        </button>
      </div>
    </div>
    <!-- !Add comment -->

    <!-- Thanks for comment -->
    <div class="pmp-comment-thanks" data-ng-show="true == newCommentPosted">
      Thanks for the comment!
      <br />
      <span class="pmp-comment-reenable" data-ng-click="newCommentPosted = false">Want to add another comment?</span>
    </div>
    <!-- !Thanks for comment -->
  </div>
</div>
<!-- !Comment -->
